---
layout: post
title: Kimage 笔记
date: 2022-11-2
catalog: true
tags: [实习]
---

# XY标定

1. 采图
2. 找圆，获得虚拟长度
3. 将虚拟长度以及标定板上实际长度输入XY标定，进行比例转换

# N点标定

1. 采图
2. 图像处理
3. 形状缩放匹配获得若干点的虚拟坐标
4. 手动获得以上点的实际坐标
5. 输入N点标定进行坐标转换

# 零件测量

1. 采图
2. 图像处理
3. 二维码识别，获得正确测量数据
4. 形状缩放匹配
5. 找形状，测量形状间距离，角度等数据
6. 根据二维码识别数据，设定区间判断数据是否合格

# 七巧板案例

1. 采图
2. 颜色提取，图像处理，形状匹配
3. 将检测到的坐标点、目标角度、形态类型（也就是模板名称）存入拼图定位
4. 将拼图定位中的抓取位置，放置位置（坐标转换位置）以及角度数据引用存入列表（用户变量）并勾选序号
5. 将用户变量中的序号引用当前循环次数
6. 引用用户变量中的坐标进行循环抓取和放置

# 3D手眼标定

1. PLC拍照位
2. 3D相机拍照
3. 点云处理（获取信息完整的区域，噪点少的区域）
4. 查找特征点（在前面选定的区域内）
5. 3D点坐标获取（获得实际坐标，注意转换坐标除以1000）
6. 3D手眼标定（坐标转换）
7. 表面拟合（获得基准平面，尽量少一点噪点）

> 测量高度拍照时需要在与标定时同一个拍照位

# 3D体积测量

1. 移到拍照位
2. 拍照
3. 点云处理，调整范围过滤需要处理的区域
4. 体积测量（引用前面的点云处理以及基准平面），建立一个长度为7的长浮点列表存储数据
5. 3D坐标转换（将虚拟的坐标长度数据转换为现实坐标）
6. 物体抓取（相机到表面拟合平面的距离减去物体高度为吸嘴下降高度）

# 零件测量抓取圆块

1. 使用2D相机采图
2. 对采图结果进行图像处理并识别二维码获得零件数据
3. 进行零件测量案例的步骤
4. 判断是否零件合格，合格则走绿色块分支抓取绿色块，否则走红色块分支
5. 在分支内进行颜色提取，形状匹配，获取色块坐标和角度，找不到色块则将PLC移动到另一边，采图获得色块的坐标并进行抓取和放置

# 物品分拣案例

1. 使用3D相机进行3D手眼标定，然后进行拍照、点云处理、体积测量等步骤，获得要分拣的物品的高度以及坐标信息
2. 利用物品位置信息将其抓取到2D相机的拍照位
3. 采图并对物品上的二维码进行识别
4. 根据识别结果选择不同分支，将物品抓取到对应位置

