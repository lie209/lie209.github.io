---
layout: post
title: Java内存分配
date: 2023-3-10
categories: blog
tags: [Java]
description: 
---

# Java 内存分配

## 五类空间

Java 代码使用的内存空间一共分为五类：

- 栈

方法运行时使用的内存，比如main方法运行，进入方法栈中执行，开始执行时进栈，代码执行完毕会出栈

方法中的变量会存储在该方法在栈里面的空间中

- 堆

存储对象或者数组，**使用`new`创建的**，都存储在堆内存中，有地址值

```java
int[] arr =new int[2];
```

其中，`arr`存储在栈中，`new`出来的空间存储在堆内存中，并将地址赋值给栈中的`arr`

- 方法区

字节码文件加载时进入的内存，存储可以运行的`class`文件

- 本地方法栈

`JVM`在使用操作系统功能的时候使用，与开发无关

- 寄存器

给CPU使用，与开发无关

## 对象内存图

![image-20230310154217629](https://s2.loli.net/2023/03/10/qrWdufvi5AsSg6a.png)